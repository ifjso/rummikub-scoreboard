(this["webpackJsonprummikub-scoreboard"]=this["webpackJsonprummikub-scoreboard"]||[]).push([[0],{155:function(e,n,t){e.exports=t(328)},160:function(e,n,t){},327:function(e,n,t){},328:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(121),i=t.n(c),o=t(26),u=(t(160),t(27)),l=t(35),s=t(331),f=t(332),m=Object(u.e)((function(e){var n=e.location.pathname,t=Object(r.useState)(n),c=Object(l.a)(t,2),i=c[0],u=c[1],m=Object(r.useCallback)((function(e,n){var t=n.to;return u(t)}),[]);return a.a.createElement(s.a,{fixed:"top",size:"massive",icon:!0,borderless:!0,inverted:!0},a.a.createElement(s.a.Item,{as:o.b,to:"/",active:"/"===i,onClick:m},a.a.createElement("img",{src:"logo192.png",alt:"\ud648",style:{fontSize:"0.8rem"}})),a.a.createElement(s.a.Item,{as:o.b,to:"/histories",active:"/histories"===i,onClick:m},a.a.createElement(f.a,{name:"history"})))})),v=t(28),d=t.n(v),b=t(47),h=t(46),p=t(2),g=t(3),j=t(34);function w(){var e=Object(p.a)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  width: 80vw;\n  margin: 0 auto;\n  display: flex;\n"]);return w=function(){return e},e}var O=g.b.div(w()),E=function(e){var n=e.children,t=Object(j.a)(e,["children"]);return a.a.createElement(O,t,n)},y=t(136),x=t.n(y);function k(){var e=Object(p.a)(["\n      position: relative;\n      top: 0;\n      left: 0;\n      width: 100%;\n      text-align: center;\n      margin: 0;\n      transform: translateX(0) translateY(0);\n    "]);return k=function(){return e},e}function z(){var e=Object(p.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 1000;\n  transform: translateX(-50%) translateY(-50%);\n  ","\n"]);return z=function(){return e},e}var C=Object(g.b)(x.a)(z(),(function(e){return e.inline&&Object(g.a)(k())})),L=function(e){var n=e.width,t=void 0===n?140:n,r=e.height,c=void 0===r?140:r,i=Object(j.a)(e,["width","height"]);return a.a.createElement(C,Object.assign({width:t,height:c},i))};function P(){var e=Object(p.a)(["\n  ","\n"]);return P=function(){return e},e}function S(){var e=Object(p.a)(["\n  ","\n"]);return S=function(){return e},e}function N(){var e=Object(p.a)(["\n  width: 50%;\n  border: none;\n  outline: none;\n  font-size: 10vw;\n  padding: 1.5vw;\n  line-height: 7vw;\n  background: #121212;\n  cursor: pointer;\n"]);return N=function(){return e},e}var T=Object(g.a)(N()),I=Object(g.b)(o.b)(S(),T),R=g.b.button(P(),T),B=function(e){var n=e.to,t=Object(j.a)(e,["to"]);return n?a.a.createElement(I,Object.assign({to:n},t)):a.a.createElement(R,t)};function H(){var e=Object(p.a)(["\n  margin: 0 auto;\n  padding: 1vw;\n  font-size: 6vw;\n  line-height: 2em;\n"]);return H=function(){return e},e}function J(){var e=Object(p.a)(["\n  width: 28%;\n"]);return J=function(){return e},e}function M(){var e=Object(p.a)(["\n      flex-direction: row-reverse;\n    "]);return M=function(){return e},e}function W(){var e=Object(p.a)(["\n  width: 100%;\n  display: flex;\n\n  ","\n"]);return W=function(){return e},e}function X(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: wrap;\n  padding-bottom: 5vh;\n"]);return X=function(){return e},e}function Y(){var e=Object(p.a)(["\n  width: 26vw;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  color: white;\n\n  h1 {\n    margin: 0;\n    text-align: center;\n    font-size: 28vw;\n    line-height: 24vw;\n  }\n"]);return Y=function(){return e},e}var A=g.b.div(Y()),F=g.b.div(X()),U=g.b.div(W(),(function(e){return e.reversed&&Object(g.a)(M())})),$=g.b.div(J()),_=g.b.span(H()),q=function(e){var n=e.reversed,t=e.user,r=t.name,c=t.picture;return a.a.createElement(U,{reversed:n},a.a.createElement($,{reversed:n,picture:c}),a.a.createElement(_,null,r))},D=a.a.memo((function(e){var n=e.reversed,t=void 0!==n&&n,r=e.user,c=e.onClick,i=void 0===c?function(e){return e}:c;return a.a.createElement(A,null,a.a.createElement(B,{onClick:function(){return i(r,1)}},a.a.createElement(f.a,{name:"plus",size:"small",color:"grey"})),a.a.createElement(F,null,a.a.createElement(q,{reversed:t,user:r}),a.a.createElement("h1",null,r.score)),a.a.createElement(B,{onClick:function(){return i(r,-1)}},a.a.createElement(f.a,{name:"minus",size:"small",color:"grey"})))})),G=t(137),K=t.n(G).a.create();K.defaults.baseURL="https://rummikub-scoreboard.herokuapp.com";var Q=K,V=function(e){return Q.get("/api/users/".concat(e))},Z=function(e){var n=e.owner,t=e.score,r=e.emojiType,a=e.memo;return Q.patch("/api/users/".concat(n),{score:t,emojiType:r,memo:a})},ee=t(80),ne=t.n(ee),te=["\ud83c\udf1d","\ud83c\udf89","\ud83c\udf88","\ud83c\udf61","\ud83c\udf1f"],re=te.concat(["\ud83c\udf2a","\ud83d\ude27","\u26c8","\ud83d\udc7b","\ud83d\udca9"]),ae=function(e){return e>0?ne()(te.length-1):ne()(te.length,re.length-1)};function ce(){var e=Object(p.a)(["\n  padding-top: 3vw;\n  font-weight: bold;\n  color: white;\n"]);return ce=function(){return e},e}function ie(){var e=Object(p.a)(["\n  width: 86vw;\n  height: 90vw;\n  padding: 2vw;\n  align-items: center;\n  justify-content: space-between;\n  > span {\n    margin: 0;\n    font-size: 12vw;\n  }\n"]);return ie=function(){return e},e}function oe(){var e=Object(p.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n"]);return oe=function(){return e},e}var ue=g.b.div(oe()),le=Object(g.b)(E)(ie()),se=g.b.span(ce()),fe=a.a.memo((function(){var e=Object(r.useRef)(!1),n=Object(r.useState)({isLoaded:!1,users:[]}),t=Object(l.a)(n,2),c=t[0],i=t[1];Object(r.useEffect)((function(){return function(){var n=Object(h.a)(d.a.mark((function n(){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([V(1),V(2)]);case 2:t=n.sent,e.current||i((function(e){return Object(b.a)({},e,{isLoaded:!0,users:[t[0].data,t[1].data]})}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e.current=!0}}),[]);var o=Object(r.useCallback)(function(){var n=Object(h.a)(d.a.mark((function n(t,r){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Z({owner:t.owner,score:t.score+r,emojiType:ae(r)});case 2:a=n.sent,c=a.data,e.current||i((function(e){return Object(b.a)({},e,{users:e.users.map((function(e){return c.owner===e.owner?c:e}))})}));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[]);return c.isLoaded?a.a.createElement(ue,null,a.a.createElement(le,null,a.a.createElement(D,{reversed:!1,user:c.users[0],onClick:o}),a.a.createElement(se,null,":"),a.a.createElement(D,{reversed:!0,user:c.users[1],onClick:o}))):a.a.createElement(L,{type:"Hearts",color:"#bf0303"})})),me=function(){return a.a.createElement(fe,null)},ve=function(){return a.a.createElement(me,null)},de=t(138),be=t.n(de),he=t(139),pe=t.n(he),ge=function(e){var n=e.page,t=e.perPage,r=pe.a.stringify({page:n,perPage:t});return Q.get("/api/histories?".concat(r))},je=t(140),we=t.n(je),Oe=t(141),Ee=t.n(Oe),ye=t(142);function xe(){var e=Object(p.a)(["\n  display: flex;\n  align-items: flex-end;\n  flex: 3;\n  flex-flow: column;\n  color: grey;\n"]);return xe=function(){return e},e}function ke(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  flex: 1;\n"]);return ke=function(){return e},e}function ze(){var e=Object(p.a)(["\n  flex: 1;\n  line-height: 1.5em;\n  font-size: ",";\n  font-weight: ",";\n  color: ",";\n"]);return ze=function(){return e},e}function Ce(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n"]);return Ce=function(){return e},e}function Le(){var e=Object(p.a)(["\n  color: grey;\n"]);return Le=function(){return e},e}function Pe(){var e=Object(p.a)(["\n  margin-bottom: 2vh;\n  font-size: 1.1em;\n"]);return Pe=function(){return e},e}var Se=t.n(ye)()(Ee.a),Ne=g.b.div(Pe()),Te=g.b.div(Le()),Ie=g.b.div(Ce()),Re=g.b.span(ze(),(function(e){var n=e.size;return"".concat(void 0===n?1:n,"em")}),(function(e){return e.bold?"bold":"normal"}),(function(e){var n=e.color;return n?" ".concat(n):""})),Be=Object(g.b)(Re)(ke()),He=g.b.div(xe()),Je=a.a.memo((function(e){var n,t=e.history;return a.a.createElement(Ne,{value:t.value},a.a.createElement(Te,null,a.a.createElement(Re,{size:"1.3",bold:!0},t.name)),a.a.createElement(Ie,null,a.a.createElement(Re,{size:"3.5",bold:!0,color:t.value>0?"#5aff5d":"#ff3834"},t.value>0?"+".concat(t.value):t.value),a.a.createElement(Be,{role:"img","aria-label":"",size:"2.8"},(n=t.emojiType,re[n])),a.a.createElement(He,null,a.a.createElement(Re,{size:"0.85",bold:!0},t.memo),a.a.createElement(Re,{size:"0.85"},a.a.createElement(we.a,{date:t.createdAt,formatter:Se})))))}));function Me(){var e=Object(p.a)(["\n  width: 100vw;\n"]);return Me=function(){return e},e}function We(){var e=Object(p.a)(["\n  width: 100vw;\n  padding: 5rem 2rem;\n"]);return We=function(){return e},e}var Xe=Object(g.b)(E)(We()),Ye=Object(g.b)(be.a)(Me()),Ae=a.a.memo((function(){var e=Object(r.useState)({histories:[],hasNextPage:!0,isLoaded:!1}),n=Object(l.a)(e,2),t=n[0],c=n[1],i=t.histories,o=t.hasNextPage,u=Object(r.useRef)(!1),s=Object(r.useCallback)(function(){var e=Object(h.a)(d.a.mark((function e(n){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({page:n});case 2:t=e.sent,r=t.data,u.current||c((function(e){return Object(b.a)({},e,{histories:e.histories.concat(r.histories),hasNextPage:r.hasNextPage,isLoaded:!0})}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){return s(1),function(){u.current=!0}}),[s]);var f=a.a.createElement(L,{key:"1",type:"Oval",color:"white",width:25,height:25,inline:!0});return t.isLoaded?a.a.createElement(Xe,null,a.a.createElement(Ye,{pageStart:1,loadMore:s,hasMore:o,loader:f},i.map((function(e){return a.a.createElement(Je,{key:e._id,history:e})})))):a.a.createElement(L,{type:"Hearts",color:"#bf0303"})})),Fe=function(){return a.a.createElement(Ae,null)},Ue=function(){return a.a.createElement(Fe,null)},$e=(t(327),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,null),a.a.createElement(u.a,{component:ve,path:"/",exact:!0}),a.a.createElement(u.a,{component:Ue,path:"/histories"}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(o.a,{basename:"/rummikub-scoreboard"},a.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[155,1,2]]]);
//# sourceMappingURL=main.28f5f9e8.chunk.js.map