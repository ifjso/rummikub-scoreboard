(this["webpackJsonprummikub-scoreboard"]=this["webpackJsonprummikub-scoreboard"]||[]).push([[0],{243:function(e,n,t){e.exports=t.p+"static/media/logo.381fb2b8.png"},289:function(e,n,t){e.exports=t(500)},298:function(e,n,t){},499:function(e,n,t){},500:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(46),c=t.n(o),i=t(34),u=t(41),s=t(277),l=t(241),m=t(57),d=(t(298),t(242)),b=t(62),f=t(42),v=t(514),g=t(72),h=t(243),p=t.n(h),O=Object(b.e)((function(e){var n=e.location.pathname,t=Object(r.useState)(n),o=Object(f.a)(t,2),c=o[0],i=o[1],u=Object(r.useCallback)((function(e,n){var t=n.to;return i(t)}),[]);return a.a.createElement(v.a,{fixed:"top",size:"massive",icon:!0,borderless:!0,inverted:!0},a.a.createElement(v.a.Item,{as:m.b,to:"/",active:"/"===c,onClick:u},a.a.createElement("img",{src:p.a,alt:"\ud648",style:{fontSize:"0.8rem"}})),a.a.createElement(v.a.Item,{as:m.b,to:"/histories",active:"/histories"===c,onClick:u},a.a.createElement(g.a,{name:"history"})))})),j=t(22),E=t(25),w=t.n(E),x=t(125),S=t(516),y=t(511),k=t(32),R=t(248),C=t.n(R).a.create();C.defaults.baseURL="https://rummikub-scoreboard.herokuapp.com";var L,z=C,A=function(e){return z.get("/api/users/".concat(e))},_=function(e){var n=e.owner,t=e.score,r=e.emojiType,a=e.memo;return z.patch("/api/users/".concat(n),{score:t,emojiType:r,memo:a})},M=w.a.mark(N),I=w.a.mark(T),U=Object(S.a)("scoreboard/READ_USERS",(function(e){return{users:e}})),D=Object(S.a)("scoreboard/START_SAVING_SCORE",(function(e){return{selectedUserIndex:e}})),P=Object(S.a)("scoreboard/END_SAVING_SCORE",(function(e,n){return{selectedUserIndex:e,user:n}}));function N(e){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.a)([Object(k.b)(A,1),Object(k.b)(A,2)]);case 3:return n=e.sent,e.next=6,Object(k.c)({type:"scoreboard/READ_USERS_SUCCESS",payload:[n[0].data,n[1].data]});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(k.c)({type:"scoreboard/READ_USERS_FAILURE",payload:e.t0,error:!0});case 12:case"end":return e.stop()}}),M,null,[[0,8]])}function T(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)("scoreboard/READ_USERS",N);case 2:case"end":return e.stop()}}),I)}var H,W=Object(y.a)((L={},Object(j.a)(L,"scoreboard/READ_USERS_SUCCESS",(function(e,n){var t=n.payload;return Object(x.a)(e,(function(e){e.isLoading=!1;var n=Object(f.a)(t,2);e.scores[0].user=n[0],e.scores[1].user=n[1]}))})),Object(j.a)(L,"scoreboard/START_SAVING_SCORE",(function(e,n){var t=n.payload.selectedUserIndex;return Object(x.a)(e,(function(e){e.scores[t].isLoading=!0}))})),Object(j.a)(L,"scoreboard/END_SAVING_SCORE",(function(e,n){var t=n.payload,r=t.selectedUserIndex,a=t.user;return Object(x.a)(e,(function(e){e.scores[r].user=a,e.scores[r].isLoading=!1}))})),L),{isLoading:!0,scores:[{user:null,isLoading:!1},{user:null,isLoading:!1}]}),G=t(63),F=Object(S.a)("form/CHANGE_MEMO",(function(e){return{memo:e}})),V=Object(S.a)("form/SHOW_ERROR"),B=Object(S.a)("form/SHOW_MODAL",(function(e,n){return{selectedUserIndex:e,value:n}})),J=Object(S.a)("form/HIDE_MODAL"),X=Object(y.a)((H={},Object(j.a)(H,"form/CHANGE_MEMO",(function(e,n){var t=n.payload.memo;return Object(G.a)({},e,{memo:t,error:!1})})),Object(j.a)(H,"form/SHOW_ERROR",(function(e){return Object(G.a)({},e,{error:!0})})),Object(j.a)(H,"form/SHOW_MODAL",(function(e,n){var t=n.payload,r=t.selectedUserIndex,a=t.value;return Object(G.a)({},e,{selectedUserIndex:r,value:a,isInputting:!0})})),Object(j.a)(H,"form/HIDE_MODAL",(function(e){return Object(G.a)({},e,{memo:"",error:!1,isInputting:!1})})),H),{selectedUserIndex:0,value:0,memo:"",error:!1,isInputting:!1}),Y=t(122),$=t(81),q=t(17),K=t(18),Q=t(249),Z=t.n(Q);function ee(){var e=Object(q.a)(["\n      position: relative;\n      top: 0;\n      left: 0;\n      width: 100%;\n      text-align: center;\n      margin: 0;\n      transform: translateX(0) translateY(0);\n    "]);return ee=function(){return e},e}function ne(){var e=Object(q.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 1000;\n  transform: translateX(-50%) translateY(-50%);\n  ","\n"]);return ne=function(){return e},e}var te=Object(K.b)(Z.a)(ne(),(function(e){return e.inline&&Object(K.a)(ee())})),re=function(e){var n=e.width,t=void 0===n?140:n,r=e.height,o=void 0===r?140:r,c=Object($.a)(e,["width","height"]);return a.a.createElement(te,Object.assign({width:t,height:o},c))},ae=t(252),oe=t.n(ae);function ce(){var e=Object(q.a)(["\n  ","\n"]);return ce=function(){return e},e}function ie(){var e=Object(q.a)(["\n  ","\n"]);return ie=function(){return e},e}function ue(){var e=Object(q.a)(["\n  width: 50%;\n  border: none;\n  outline: none;\n  font-size: 10vw;\n  padding: 1.5vw;\n  line-height: 7vw;\n  background: #121212;\n  cursor: pointer;\n"]);return ue=function(){return e},e}var se=Object(K.a)(ue()),le=Object(K.b)(m.b)(ie(),se),me=K.b.button(ce(),se),de=function(e){var n=e.to,t=Object($.a)(e,["to"]);return n?a.a.createElement(le,Object.assign({to:n},t)):a.a.createElement(me,t)};function be(){var e=Object(q.a)(["\n      color: rgba(255, 255, 255, 0.5);\n      background-color: #222;\n      background-image: linear-gradient(\n        to right,\n        rgba(34, 34, 34, 1),\n        rgba(255, 255, 255, 0.5),\n        rgba(34, 34, 34, 1)\n      );\n\n      --shimmer-size: ",";\n      background-size: var(--shimmer-size) 100%;\n      -webkit-background-size: var(--shimmer-size) 100%;\n      background-repeat: no-repeat;\n      background-clip: text;\n      -webkit-background-clip: text;\n      animation-name: shimmer;\n      animation-duration: 1s;\n      animation-iteration-count: infinite;\n    "]);return be=function(){return e},e}function fe(){var e=Object(q.a)(["\n  color: white;\n  ","\n\n  @keyframes shimmer {\n    0% {\n      background-position: calc(0% - var(--shimmer-size)) 0;\n    }\n\n    100% {\n      background-position: calc(100% + var(--shimmer-size)) 0;\n    }\n  }\n"]);return fe=function(){return e},e}var ve=Object(K.a)(fe(),(function(e){return e.isLoading&&Object(K.a)(be(),(function(e){var n=e.shimmerSize;return"".concat(void 0===n?.3:n,"em")}))}));function ge(){var e=Object(q.a)(["\n  ","\n"]);return ge=function(){return e},e}var he=K.b.h1(ge(),ve);function pe(){var e=Object(q.a)(["\n  margin: 0 auto;\n  padding: 1vw;\n  font-size: 6vw;\n  line-height: 2em;\n"]);return pe=function(){return e},e}function Oe(){var e=Object(q.a)(["\n  width: 40%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > img {\n    width: 100%;\n    clip-path: circle(40% at center);\n  }\n"]);return Oe=function(){return e},e}function je(){var e=Object(q.a)(["\n      flex-direction: row-reverse;\n    "]);return je=function(){return e},e}function Ee(){var e=Object(q.a)(["\n  width: 100%;\n  display: flex;\n\n  ","\n"]);return Ee=function(){return e},e}function we(){var e=Object(q.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: wrap;\n  padding-bottom: 5vh;\n"]);return we=function(){return e},e}function xe(){var e=Object(q.a)(["\n  width: 26vw;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  color: white;\n\n  h1 {\n    margin: 0;\n    text-align: center;\n    font-size: 28vw;\n    line-height: 24vw;\n  }\n"]);return xe=function(){return e},e}var Se=K.b.div(xe()),ye=K.b.div(we()),ke=K.b.div(Ee(),(function(e){return e.isReversed&&Object(K.a)(je())})),Re=K.b.div(Oe()),Ce=K.b.span(pe()),Le=function(e){var n=e.name,t=e.size,r=void 0===t?"small":t,o=e.isLoading,c=void 0!==o&&o,i=e.onClick,u=void 0===i?function(e){return e}:i;return a.a.createElement(de,{onClick:u,disabled:c},a.a.createElement(g.a,{name:n,size:r,color:"grey",disabled:c,loading:c}))},ze=function(e){var n=e.isReversed,t=e.user,r=t.name,o=t.picture;return a.a.createElement(ke,{isReversed:n},a.a.createElement(Re,{isReversed:n},a.a.createElement(oe.a,{src:o,alt:"me",loader:a.a.createElement(re,{type:"ThreeDots",width:24,height:24,color:"grey",inline:!0})})),a.a.createElement(Ce,null,r))},Ae=a.a.memo((function(e){var n=e.index,t=e.user,r=e.isReversed,o=void 0!==r&&r,c=e.isLoading,i=void 0!==c&&c,u=e.onClick,s=void 0===u?function(e){return e}:u;return a.a.createElement(Se,null,a.a.createElement(Le,{name:"plus",isLoading:i,onClick:function(){return s(n,1)}}),a.a.createElement(ye,null,a.a.createElement(ze,{isReversed:o,user:t}),a.a.createElement(he,{isLoading:i},t.score)),a.a.createElement(Le,{name:"minus",isLoading:i,onClick:function(){return s(n,-1)}}))}));function _e(){var e=Object(q.a)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  width: 80vw;\n  margin: 0 auto;\n  display: flex;\n"]);return _e=function(){return e},e}var Me=K.b.div(_e()),Ie=function(e){var n=e.children,t=Object($.a)(e,["children"]);return a.a.createElement(Me,t,n)};function Ue(){var e=Object(q.a)(["\n  padding-top: 3vw;\n  font-weight: bold;\n  color: white;\n"]);return Ue=function(){return e},e}function De(){var e=Object(q.a)(["\n  width: 86vw;\n  height: 90vw;\n  padding: 2vw;\n  align-items: center;\n  justify-content: space-between;\n  > span {\n    margin: 0;\n    font-size: 12vw;\n  }\n"]);return De=function(){return e},e}function Pe(){var e=Object(q.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n"]);return Pe=function(){return e},e}var Ne,Te=K.b.div(Pe()),He=Object(K.b)(Ie)(De()),We=K.b.span(Ue()),Ge=a.a.memo((function(e){var n=e.isLoading,t=e.scores,o=e.onReadUsers,c=e.onShowModal;Object(r.useEffect)((function(){n&&o()}),[n,o]);var i=Object(r.useCallback)(function(){var e=Object(Y.a)(w.a.mark((function e(n,t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(n,t));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[c]);return n?a.a.createElement(re,{type:"Hearts",color:"#bf0303"}):a.a.createElement(Te,null,a.a.createElement(He,null,a.a.createElement(Ae,{index:0,user:t[0].user,isReversed:!1,isLoading:t[0].isLoading,onClick:i}),a.a.createElement(We,null,":"),a.a.createElement(Ae,{index:1,user:t[1].user,isReversed:!0,isLoading:t[1].isLoading,onClick:i})))})),Fe=t(276),Ve=function(e,n){var t=Object(u.b)();return Object(r.useMemo)((function(){return Array.isArray(e)?e.map((function(e){return Object(i.bindActionCreators)(e,t)})):Object(i.bindActionCreators)(e,t)}),n?[t].concat(Object(Fe.a)(n)):n)},Be=a.a.memo((function(){var e=Object(u.c)((function(e){return e.scoreboard})),n=e.isLoading,t=e.scores,r=Ve([U,B],[]),o=Object(f.a)(r,2),c=o[0],i=o[1];return a.a.createElement(Ge,{isLoading:n,scores:t,onReadUsers:c,onShowModal:i})})),Je=t(510),Xe=t(509),Ye=t(512),$e=t(515),qe=function(e){var n=e.open,t=void 0===n||n,r=e.title,o=void 0===r?"":r,c=e.onMount,i=void 0===c?function(e){return e}:c,u=e.onClose,s=void 0===u?function(e){return e}:u,l=e.children;return a.a.createElement(Ye.a,{size:"fullscreen",open:t,onMount:i,onClose:s},a.a.createElement(Ye.a.Content,null,a.a.createElement(Ye.a.Description,null,a.a.createElement($e.a,null,o),l)))},Ke=t(166),Qe=t.n(Ke),Ze=["\ud83c\udf1d","\ud83c\udf89","\ud83c\udf88","\ud83c\udf61","\ud83c\udf1f"],en=Ze.concat(["\ud83c\udf2a","\ud83d\ude27","\u26c8","\ud83d\udc7b","\ud83d\udca9"]),nn=function(e){return e>0?Qe()(Ze.length-1):Qe()(Ze.length,en.length-1)},tn=a.a.memo((function(e){var n=e.memoModal,t=e.scores,o=e.onChangeMemo,c=e.onShowError,i=e.onStartSavingScore,u=e.onEndSavingScore,s=e.onHideModal,l=Object(r.useRef)(null),m=Object(r.useCallback)((function(e){return o(e.target.value.trim())}),[o]),d=Object(r.useCallback)(Object(Y.a)(w.a.mark((function e(){var r,a,o,l,m;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.memo){e.next=3;break}return c(),e.abrupt("return");case 3:return r=n.selectedUserIndex,a=n.value,o=t[r].user,i(r),s(),e.next=9,_({owner:o.owner,score:o.score+a,emojiType:nn(a),memo:n.memo});case 9:l=e.sent,m=l.data,u(r,m);case 12:case"end":return e.stop()}}),e)}))),[n,t,c,i,s,u]),b=Object(r.useCallback)((function(){return l.current.focus()}),[]);return a.a.createElement(qe,{open:n.isInputting,title:"\ubb34\uc2a8 \uc77c\uc774 \uc788\uc5c8\ub294\uc9c0 \uae30\ub85d\ud574 \ubcf4\uc544\uc694.",onMount:b,onClose:s},a.a.createElement(Je.a,{error:n.error,onSubmit:d},a.a.createElement(Je.a.Field,{error:n.error},a.a.createElement(Xe.a,{ref:l,size:"huge",fluid:!0,action:{color:n.error?"google plus":"blue",icon:"write",size:"huge"},onChange:m,maxLength:50}))))})),rn=a.a.memo((function(){var e=Object(u.c)((function(e){return{memoModal:e.memoModal,scores:e.scoreboard.scores}})),n=e.memoModal,t=e.scores,r=Ve([F,V,D,P,J],[]),o=Object(f.a)(r,5),c=o[0],i=o[1],s=o[2],l=o[3],m=o[4];return a.a.createElement(tn,{memoModal:n,scores:t,onChangeMemo:c,onShowError:i,onStartSavingScore:s,onEndSavingScore:l,onHideModal:m})})),an=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Be,null),a.a.createElement(rn,null))},on=t(270),cn=t.n(on),un=function(e){var n=e.page,t=e.perPage,r=cn.a.stringify({page:n,perPage:t});return z.get("/api/histories?".concat(r))},sn=w.a.mark(fn),ln=w.a.mark(vn),mn="histories/LOAD",dn=Object(S.a)(mn,(function(e){return e})),bn=Object(S.a)("histories/RESET");function fn(e){var n,t;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(k.b)(un,{page:e.payload});case 3:return n=r.sent,t=n.data,r.next=7,Object(k.c)({type:"histories/LOAD_SUCCESS",payload:Object(G.a)({},t,{currentPage:e.payload})});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,Object(k.c)({type:"histories/LOAD_FAILURE",payload:r.t0,error:!0});case 13:case"end":return r.stop()}}),sn,null,[[0,9]])}function vn(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(mn,fn);case 2:case"end":return e.stop()}}),ln)}var gn=Object(y.a)((Ne={},Object(j.a)(Ne,"histories/LOAD_SUCCESS",(function(e,n){var t=n.payload,r=t.currentPage,a=t.histories,o=t.hasNextPage;return Object(G.a)({},e,{currentPage:r,histories:e.histories.concat(a),hasNextPage:o})})),Object(j.a)(Ne,"histories/RESET",(function(){return{currentPage:0,histories:[],hasNextPage:!0}})),Ne),{currentPage:0,histories:[],hasNextPage:!0}),hn=t(271),pn=t.n(hn),On=t(272),jn=t.n(On),En=t(273),wn=t.n(En);function xn(){var e=Object(q.a)(["\n  display: flex;\n  align-items: flex-end;\n  flex: 3;\n  flex-flow: column;\n  color: grey;\n"]);return xn=function(){return e},e}function Sn(){var e=Object(q.a)(["\n  display: flex;\n  justify-content: center;\n  flex: 1;\n"]);return Sn=function(){return e},e}function yn(){var e=Object(q.a)(["\n  flex: 1;\n  line-height: 1.5em;\n  font-size: ",";\n  font-weight: ",";\n  color: ",";\n"]);return yn=function(){return e},e}function kn(){var e=Object(q.a)(["\n  display: flex;\n  align-items: center;\n"]);return kn=function(){return e},e}function Rn(){var e=Object(q.a)(["\n  color: grey;\n"]);return Rn=function(){return e},e}function Cn(){var e=Object(q.a)(["\n  margin-bottom: 2vh;\n  font-size: 1.1em;\n"]);return Cn=function(){return e},e}var Ln=K.b.div(Cn()),zn=K.b.div(Rn()),An=K.b.div(kn()),_n=K.b.span(yn(),(function(e){var n=e.size;return"".concat(void 0===n?1:n,"em")}),(function(e){return e.bold?"bold":"normal"}),(function(e){var n=e.color;return n?" ".concat(n):""})),Mn=Object(K.b)(_n)(Sn()),In=K.b.div(xn()),Un=wn()(jn.a),Dn=a.a.memo((function(e){var n,t=e.history;return a.a.createElement(Ln,{value:t.value},a.a.createElement(zn,null,a.a.createElement(_n,{size:"1.3",bold:!0},t.name)),a.a.createElement(An,null,a.a.createElement(_n,{size:"3.5",bold:!0,color:t.value>0?"#5aff5d":"#ff3834"},t.value>0?"+".concat(t.value):t.value),a.a.createElement(Mn,{role:"img","aria-label":"",size:"2.8"},(n=t.emojiType,en[n])),a.a.createElement(In,null,a.a.createElement(_n,{size:"0.85",bold:!0},t.memo),a.a.createElement(_n,{size:"0.85"},a.a.createElement(pn.a,{date:t.createdAt,formatter:Un})))))})),Pn=t(274),Nn=t.n(Pn);function Tn(){var e=Object(q.a)(["\n  width: 100vw;\n"]);return Tn=function(){return e},e}function Hn(){var e=Object(q.a)(["\n  width: 100vw;\n  padding: 5rem 2rem;\n"]);return Hn=function(){return e},e}var Wn=Object(K.b)(Ie)(Hn()),Gn=Object(K.b)(Nn.a)(Tn()),Fn=a.a.memo((function(e){var n=e.currentPage,t=e.histories,o=e.hasNextPage,c=e.onLoad,i=e.onReset;Object(r.useEffect)((function(){return function(){return i()}}),[i]);var u=Object(r.useCallback)((function(e){return c(e)}),[c]),s=a.a.createElement(re,{key:"1",type:"Oval",color:"white",width:25,height:25,inline:!0});return a.a.createElement(Wn,null,a.a.createElement(Gn,{pageStart:n,loadMore:u,hasMore:o,loader:s},t.map((function(e){return a.a.createElement(Dn,{key:e._id,history:e})}))))})),Vn=a.a.memo((function(){var e=Object(u.c)((function(e){return e.histories})),n=e.currentPage,t=e.histories,r=e.hasNextPage,o=Ve([dn,bn],[]),c=Object(f.a)(o,2),i=c[0],s=c[1];return a.a.createElement(Fn,{currentPage:n,histories:t,hasNextPage:r,onLoad:i,onReset:s})})),Bn=function(){return a.a.createElement(Vn,null)},Jn=(t(499),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(O,null),a.a.createElement(b.a,{component:an,path:"/",exact:!0}),a.a.createElement(b.a,{component:Bn,path:"/histories"}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Xn=w.a.mark(Yn);function Yn(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([vn(),T()]);case 2:case"end":return e.stop()}}),Xn)}var $n=Object(i.combineReducers)({histories:gn,scoreboard:W,memoModal:X}),qn=Object(d.createLogger)(),Kn=Object(s.a)(),Qn=Object(i.createStore)($n,Object(l.composeWithDevTools)(Object(i.applyMiddleware)(qn,Kn)));Kn.run(Yn),c.a.render(a.a.createElement(u.a,{store:Qn},a.a.createElement(m.a,{basename:"/rummikub-scoreboard"},a.a.createElement(Jn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[289,1,2]]]);
//# sourceMappingURL=main.5c7d2130.chunk.js.map